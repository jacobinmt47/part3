{"version":3,"sources":["services/person.js","components/Notification.js","App.js","index.js"],"names":["baseurl","persons","setPersons","setErrorMsg","console","log","axios","get","then","response","data","catch","error","person","setNewName","setNewPhone","successMsg","name","post","x","concat","setp","p","filter","id","setTimeout","delete","pNew","phoneNumber","np","put","Notification","props","includes","className","Names","people","toLowerCase","Array","isArray","fp","map","key","phonenumber","onClick","PhoneFilter","value","filterName","onChange","handleFilterChange","PersonForm","onSubmit","addName","newName","handlePersonChange","newPhone","handlePhoneChange","type","App","useState","setFilterName","errorMsg","useEffect","pServices","event","target","preventDefault","Math","floor","random","isNew","findIndex","astring","window","confirm","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.58a3e2f9.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseurl =\"/api/persons\"\r\n\r\nconst getAll = (persons,setPersons,setErrorMsg) =>{\r\n    console.log(\"getAll called\")\r\n    axios.get(baseurl)\r\n    .then(response =>{\r\n        console.log(\"promise fullfilled\")\r\n        if(persons ===''){\r\n         console.log(\"empty persons\") \r\n         setPersons(response.data)  \r\n        }\r\n    })\r\n    .catch(error =>\r\n        {console.log(error)\r\n          setErrorMsg('get all failed')\r\n        })\r\n}\r\n\r\nconst add = (person,persons,setPersons,setNewName,setNewPhone,setErrorMsg) =>{\r\n    const successMsg ='success '+person.name+' added'\r\n    axios.post(baseurl,person)\r\n    .then((response) =>{\r\n        const x = persons.concat(response.data)\r\n        setPersons(x)\r\n        setNewName('')\r\n        setNewPhone('')\r\n        setErrorMsg(successMsg)\r\n    })\r\n    .catch(error =>\r\n        {console.log(error)\r\n            setErrorMsg('add failed')\r\n        })\r\n\r\n}\r\nconst del=(person,persons,setPersons,setErrorMsg) =>{\r\n    const setp = () => {\r\n        let p = persons.filter(x =>x.id !== person.id)\r\n        setPersons(p)\r\n        setTimeout(()=>{setErrorMsg(null)},5000)\r\n    }\r\n    axios.delete(baseurl+'/'+person.id)\r\n    .then(response =>{\r\n        console.log(response)\r\n        setp()\r\n    })\r\n    .catch(error =>\r\n        {\r\n        console.log(error)\r\n        setErrorMsg(person.name+' is already deleted')\r\n        setp()\r\n    })\r\n        \r\n}\r\n\r\nconst update=(person,persons,setPersons,setNewName,setNewPhone,setErrorMsg) =>{\r\nconst p = persons.filter(x=>x.name === person.name) // used to get id of old person\r\nlet pNew = p[0]\r\npNew.phoneNumber =person.phoneNumber\r\nlet np = persons.filter(x =>x.id !== p[0].id)\r\nnp = np.concat(pNew)\r\nconsole.log(person,'-----')\r\nconsole.log(pNew)\r\nsetPersons(np)\r\nsetNewName('')\r\nsetNewPhone('')\r\naxios.put(baseurl+\"/\"+pNew.id,pNew)\r\n.then(response =>{\r\n    console.log(response)\r\n    setErrorMsg('success '+p[0].name+' updated')\r\n})\r\n.catch(error =>\r\n    {console.log(error)\r\n    setErrorMsg('update failed')\r\n    })\r\n\r\n}\r\nexport default{getAll,add,del,update}","import React from 'react'\r\n\r\nconst Notification = (props) => {\r\n    if (props.error === null){\r\n        return null\r\n    }\r\n    if(typeof(props.error)==='string'){\r\n    if(props.error.includes('success')){\r\n        return(\r\n            <li className='success' >\r\n                {props.error}\r\n            </li>\r\n        )\r\n    }\r\n}\r\n    return (\r\n        <li className='error'>\r\n            'person all ready deleted' \r\n        </li>\r\n    )\r\n}\r\n\r\nexport default Notification","import React,{useState, useEffect} from 'react';\r\nimport pServices from './services/person'\r\nimport Notification from './components/Notification'\r\n\r\n// convert to lowercase and return items that match\r\nconst Names = (props) =>{\r\n  const people = props.persons\r\n  const filter = props.filter.toLowerCase()\r\n  if(Array.isArray(people)){\r\n  console.log(people)\r\n  console.log(typeof(people[0].name))\r\n  const fp = people.filter((x) =>x.name.toLowerCase().includes(filter))\r\n  if(typeof(fp ==='object')){ //if empty fp is undefined\r\n    const p = fp.map(x =><li key={x.id}>{x.name} {x.phonenumber} <button id={x.id} onClick={props.onClick}>delete</button></li>)\r\n    return(p)\r\n  }\r\n}\r\n  return('')\r\n}\r\n\r\nconst PhoneFilter =(props) =>{\r\n  //console.log(props)\r\n  return(\r\n    <>\r\n      filter showen with: <input value={props.filterName} onChange={props.handleFilterChange} />\r\n    </>\r\n  )\r\n}\r\n\r\nconst PersonForm =(props) =>{\r\n // console.log(props)\r\n  return(\r\n    <form onSubmit ={props.addName}>\r\n    <div>\r\n      name: <input value={props.newName} onChange={props.handlePersonChange}/>< br />\r\n      number: <input value={props.newPhone} onChange={props.handlePhoneChange} />\r\n    </div>\r\n    <div>\r\n      <button type=\"submit\">add</button>\r\n    </div>\r\n  </form>\r\n  )\r\n}\r\n\r\nconst  App = () => {\r\n  const [ persons, setPersons] = useState('')\r\n  const [ newPhone, setNewPhone] = useState('')\r\n  const [ newName, setNewName ] = useState('')\r\n  const [filterName, setFilterName] = useState('') \r\n  const [errorMsg, setErrorMsg] = useState(null)\r\n\r\n  useEffect(() =>{\r\n    console.log(\"effect called\")\r\n   pServices.getAll(persons,setPersons,setErrorMsg)\r\n\r\n  },[persons]\r\n  )\r\n  const addName = (event) =>{\r\n    console.log(\"add Name Called \")\r\n    event.preventDefault()\r\n    const p ={\r\n      name:newName,\r\n      id:Math.floor(Math.random()*4000000000),\r\n      phonenumber:newPhone\r\n    }\r\n    console.log(p)\r\n    const isNew = persons.findIndex((x) => x.name===p.name)\r\n    console.log(isNew)\r\n    if(isNew >=0 ){  \r\n      const astring = `${newName} update phone number?`\r\n      const changePhoneNumber = window.confirm(astring)\r\n      if(changePhoneNumber){\r\n        pServices.update(p,persons,setPersons,setNewName,setNewPhone,setErrorMsg)\r\n      }\r\n      \r\n    }\r\n    else{\r\n      pServices.add(p,persons,setPersons,setNewName,setNewPhone,setErrorMsg)\r\n    }\r\n  } \r\n  const handlePersonChange =(event) =>{\r\n    setNewName(event.target.value)\r\n  }\r\n  const handlePhoneChange =(event )=>{\r\n    setNewPhone(event.target.value)\r\n  }\r\n  const handleFilterChange = (event) =>{\r\n    setFilterName( event.target.value)\r\n  }\r\n  const handleClick =(event) =>{\r\n    const id =event.target.id\r\n    console.log(id,'  ',typeof(id))\r\n    const r = window.confirm(\"do you want to delete\")\r\n    if(r){\r\n      //find person and delete\r\n      if(Array.isArray(persons)){\r\n         const p = persons.filter((x) =>x.id===id)\r\n         console.log('delete',p)\r\n         pServices.del(p[0],persons,setPersons,setErrorMsg)\r\n         \r\n    }\r\n  }\r\n  }\r\n  return (\r\n    <div className=\"App\">\r\n      <Notification error ={errorMsg} />\r\n      <h2>Phonebook</h2>\r\n      <PhoneFilter filterName={filterName} handleFilterChange={handleFilterChange} />\r\n      <h2>Add a new </h2>\r\n      <PersonForm  \r\n      addName={addName} newName={newName} newPhone={newPhone} handlePersonChange={handlePersonChange} handlePhoneChange={handlePhoneChange}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Names persons={persons} filter={filterName} onClick={handleClick } />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}